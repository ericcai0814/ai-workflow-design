---
title: "架構設計流程"
id: "architecture-design"
category: "planning"
ai_usage:
  - "設計系統架構"
  - "評估架構方案"
  - "架構文件撰寫"
version: "1.0.0"
last_updated: "2026-01-23"
---

# 架構設計流程

## 概述

架構設計定義系統的整體結構和元件互動方式。本文件提供與 AI 協作進行架構設計的流程和 Prompt。

## 前置條件

- [ ] 已完成需求分析
- [ ] 已選定技術棧
- [ ] 了解非功能需求（效能、安全、可擴展性）

## 工作流程

### 步驟 1：識別架構需求

從需求中提取架構相關的考量：
- 效能需求（響應時間、吞吐量）
- 可擴展性（用戶數、資料量）
- 可用性（SLA、容錯）
- 安全性（認證、授權、資料保護）

### 步驟 2：設計系統邊界

定義系統與外部的互動：
- 用戶介面（Web、Mobile、API）
- 外部服務（第三方 API、支付、郵件）
- 資料來源（資料庫、檔案、外部資料）

### 步驟 3：劃分元件

將系統拆解為獨立的元件或模組：
- 前端元件
- 後端服務
- 資料層
- 基礎設施

### 步驟 4：定義元件互動

描述元件之間的通訊方式：
- 同步 vs 非同步
- API 協定（REST、GraphQL、gRPC）
- 資料格式

### 步驟 5：繪製架構圖

視覺化架構設計。

---

## Prompts

### Prompt 1：架構設計建議

```
你是一位資深軟體架構師。請根據以下需求設計系統架構。

## 專案需求
${PROJECT_REQUIREMENTS}

## 技術棧
${TECH_STACK}

## 非功能需求
- 預期用戶數：${USER_SCALE}
- 效能要求：${PERFORMANCE_REQ}
- 可用性要求：${AVAILABILITY_REQ}
- 安全需求：${SECURITY_REQ}

## 請設計

### 1. 架構概覽

用一段話描述整體架構設計理念。

### 2. 系統邊界

```
[外部用戶/系統]
       ↓
[系統邊界]
       ↓
[核心系統]
       ↓
[外部依賴]
```

### 3. 元件劃分

| 元件 | 職責 | 技術 |
|------|------|------|
| | | |

### 4. 元件互動

描述主要的資料流和互動方式：

```
用戶 → 前端 → API Gateway → 後端服務 → 資料庫
                              ↓
                         外部服務
```

### 5. 資料架構

- 主要資料實體
- 資料儲存方式
- 資料流向

### 6. 部署架構

- 部署環境
- 基礎設施需求
- 擴展策略

### 7. 架構決策

列出關鍵的架構決策和原因。
```

### Prompt 2：架構圖繪製（Mermaid）

```
你是一位技術文件專家。請根據以下架構描述，產出 Mermaid 圖。

## 架構描述
${ARCHITECTURE_DESCRIPTION}

## 請產出

### 1. 系統架構圖（C4 Context）

\`\`\`mermaid
graph TB
    subgraph "系統邊界"
        ...
    end
\`\`\`

### 2. 元件圖

\`\`\`mermaid
graph LR
    ...
\`\`\`

### 3. 資料流圖

\`\`\`mermaid
sequenceDiagram
    ...
\`\`\`

### 4. 部署圖

\`\`\`mermaid
graph TB
    ...
\`\`\`
```

### Prompt 3：架構評估

```
你是一位架構評審專家。請評估以下架構設計。

## 架構設計
${ARCHITECTURE_DESIGN}

## 專案需求
${REQUIREMENTS}

## 請評估

### 1. 優點

- ...

### 2. 潛在問題

| 問題 | 嚴重度 | 建議 |
|------|--------|------|
| | 高/中/低 | |

### 3. 非功能需求滿足度

| 需求 | 滿足度 | 說明 |
|------|--------|------|
| 效能 | 高/中/低 | |
| 可擴展性 | 高/中/低 | |
| 可維護性 | 高/中/低 | |
| 安全性 | 高/中/低 | |

### 4. 改進建議

優先級高的改進：
1. ...
2. ...

可選改進：
1. ...

### 5. 風險評估

| 風險 | 機率 | 影響 | 緩解 |
|------|------|------|------|
| | 高/中/低 | 高/中/低 | |
```

---

## 架構模式參考

### 1. 單體架構（Monolith）

**適用**：小型專案、快速原型、團隊小
**優點**：簡單、部署容易、除錯方便
**缺點**：擴展困難、技術債累積

```
┌─────────────────────────┐
│        Frontend         │
├─────────────────────────┤
│        Backend          │
│  ┌─────┬─────┬─────┐   │
│  │ API │Logic│ Data│   │
│  └─────┴─────┴─────┘   │
├─────────────────────────┤
│       Database          │
└─────────────────────────┘
```

### 2. 模組化單體（Modular Monolith）

**適用**：中型專案、未來可能拆分
**優點**：單體的簡單性 + 模組的清晰邊界
**缺點**：需要紀律維護模組邊界

```
┌─────────────────────────┐
│        Frontend         │
├─────────────────────────┤
│  ┌─────────┬─────────┐ │
│  │ Module A│ Module B│ │
│  │ ┌─────┐ │ ┌─────┐ │ │
│  │ │ API │ │ │ API │ │ │
│  │ │Logic│ │ │Logic│ │ │
│  │ │Data │ │ │Data │ │ │
│  │ └─────┘ │ └─────┘ │ │
│  └─────────┴─────────┘ │
├─────────────────────────┤
│       Database          │
└─────────────────────────┘
```

### 3. 微服務（Microservices）

**適用**：大型專案、多團隊、獨立部署需求
**優點**：獨立擴展、技術多樣性、故障隔離
**缺點**：複雜度高、運維成本高

```
┌─────────┐  ┌─────────┐  ┌─────────┐
│Service A│  │Service B│  │Service C│
│  ┌───┐  │  │  ┌───┐  │  │  ┌───┐  │
│  │DB │  │  │  │DB │  │  │  │DB │  │
│  └───┘  │  │  └───┘  │  │  └───┘  │
└────┬────┘  └────┬────┘  └────┬────┘
     │            │            │
     └────────────┼────────────┘
                  │
           ┌──────┴──────┐
           │ API Gateway │
           └─────────────┘
```

---

## 檢查清單

### 架構完整性

- [ ] 已定義系統邊界
- [ ] 已劃分主要元件
- [ ] 已描述元件互動
- [ ] 已考慮資料架構
- [ ] 已規劃部署方式

### 非功能需求

- [ ] 已評估效能需求
- [ ] 已考慮可擴展性
- [ ] 已設計安全機制
- [ ] 已規劃監控和日誌

### 文件化

- [ ] 已繪製架構圖
- [ ] 已記錄關鍵決策
- [ ] 已說明技術選型理由
- [ ] 已識別風險和緩解措施

---

## 相關文件

- [需求分析](./requirement-analysis.md)
- [技術棧選擇](./tech-stack-selection.md)
- [API 設計](../02-development/backend/api-design.md)
